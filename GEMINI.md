# Gemini AI Instructions for OnchainTestKit

## Project Mission
OnchainTestKit empowers developers to create robust, automated tests for blockchain applications. As Gemini, leverage your analytical capabilities to help optimize testing strategies, improve code quality, and solve complex blockchain testing challenges.

## Technical Architecture Deep Dive

### Core Testing Framework
- **Playwright Foundation**: Built on Microsoft's reliable browser automation framework
- **Wallet Extension Integration**: Complex automation of MetaMask, Coinbase, and Phantom wallets
- **Blockchain Node Management**: Sophisticated local node orchestration with fork capabilities
- **Type-Safe Configuration**: Fluent API design with comprehensive TypeScript support

### Complexity Layers
1. **Browser Automation Layer**: Handling extension popups, context switching, timing
2. **Blockchain Interaction Layer**: Transaction management, network switching, state handling
3. **Configuration Layer**: Flexible setup for diverse testing scenarios
4. **CLI Tool Layer**: Automated wallet extension preparation and management

## Strategic Development Focus

### Code Excellence
- **Modular Architecture**: Clean separation between wallet implementations, node management, and test framework
- **Error Resilience**: Comprehensive error handling for network failures, wallet rejections, and timing issues
- **Performance Engineering**: Optimized configurations for fast test execution in CI/CD pipelines
- **API Design**: Intuitive, discoverable APIs that abstract complex blockchain operations

### Testing Strategy
- **Scenario-Driven**: Tests should reflect real user workflows and edge cases
- **State Isolation**: Proper test isolation despite shared blockchain state
- **Network Flexibility**: Support for multiple networks and testing modes
- **Automation Reliability**: Consistent behavior across different environments

## Innovation Opportunities

### Advanced Features
- **Smart Contract Testing**: Utilities for contract deployment, interaction, and verification
- **Cross-Chain Testing**: Support for multi-chain applications and bridge testing
- **Performance Metrics**: Built-in performance monitoring for blockchain operations
- **Visual Testing**: Screenshot comparison for wallet UI consistency

### Integration Enhancements
- **CI/CD Optimization**: Docker containers, parallel execution, resource management
- **Development Tools**: Better debugging support, test recording, step-through debugging
- **Monitoring Integration**: Integration with APM tools for blockchain performance monitoring
- **Security Testing**: Automated security checks and vulnerability scanning

## Problem-Solving Framework

### Analytical Approach
1. **Root Cause Analysis**: Deep dive into wallet automation failures
2. **Performance Bottlenecks**: Identify and resolve slow test execution
3. **Reliability Issues**: Systematic approach to flaky test resolution
4. **Compatibility Problems**: Handle version mismatches and API changes

### Optimization Strategies
- **Resource Utilization**: Efficient use of system resources for parallel testing
- **Network Optimization**: Smart use of RPC providers and fork configurations
- **Test Data Management**: Efficient test data generation and cleanup
- **Caching Mechanisms**: Strategic caching of blockchain state and extension data

## Technical Excellence Areas

### TypeScript Mastery
- **Advanced Types**: Leverage conditional types, mapped types, and template literals
- **Generic Constraints**: Create flexible yet type-safe APIs
- **Module System**: Proper module boundaries and dependency management
- **Performance Types**: Use TypeScript's performance features effectively

### Asynchronous Programming
- **Promise Management**: Sophisticated async/await patterns for blockchain operations
- **Concurrency Control**: Safe parallel execution of blockchain operations
- **Timeout Handling**: Intelligent timeout strategies for various operation types
- **Event-Driven Architecture**: Reactive patterns for wallet events and blockchain updates

### Browser Automation Excellence
- **Selector Strategies**: Robust element selection with fallback mechanisms
- **Wait Strategies**: Smart waiting for dynamic blockchain-related content
- **Context Management**: Efficient browser context and tab management
- **Extension Lifecycle**: Deep understanding of extension loading and initialization

## Quality Assurance Focus

### Testing the Test Framework
- **Meta-Testing**: Tests for the testing framework itself
- **Edge Case Coverage**: Comprehensive coverage of error conditions
- **Performance Testing**: Benchmarks for test execution speed
- **Compatibility Testing**: Cross-platform and cross-browser validation

### Documentation Excellence
- **API Documentation**: Comprehensive, searchable API documentation
- **Usage Examples**: Real-world examples for common use cases
- **Troubleshooting Guides**: Systematic troubleshooting for common issues
- **Migration Guides**: Clear upgrade paths for breaking changes

## Ecosystem Integration

### Blockchain Ecosystem
- **Multiple Networks**: Ethereum, Polygon, Base, Arbitrum, Optimism support
- **Protocol Integration**: DeFi, NFT, DAO, and other protocol-specific testing
- **Wallet Ecosystem**: Stay current with wallet updates and new wallet integrations
- **Developer Tools**: Integration with other blockchain development tools

### Development Ecosystem
- **Framework Integration**: Support for various testing frameworks beyond Playwright
- **Build Tools**: Integration with modern build tools and bundlers
- **IDE Support**: Enhanced IDE experience with proper type hints and documentation
- **Package Management**: Optimal package.json configuration and dependency management

## Code Review Excellence

### Architecture Review
- **Design Patterns**: Ensure appropriate use of design patterns
- **SOLID Principles**: Adherence to SOLID principles in class design
- **Dependency Injection**: Proper dependency management and inversion
- **Interface Design**: Clean, minimal interfaces that hide complexity

### Code Quality Metrics
- **Cyclomatic Complexity**: Keep methods focused and testable
- **Code Coverage**: Meaningful coverage that tests critical paths
- **Performance Metrics**: Monitor and optimize performance-critical sections
- **Security Analysis**: Regular security review of CLI tools and network handling

## Innovation Mindset

### Future-Forward Thinking
- **Emerging Technologies**: Account for new blockchain networks and protocols
- **Wallet Evolution**: Adapt to new wallet types and authentication methods
- **Testing Evolution**: Incorporate new testing methodologies and tools
- **Developer Experience**: Continuously improve the developer experience

### Community Engagement
- **Open Source Best Practices**: Encourage community contributions
- **Documentation Standards**: Maintain high-quality, accessible documentation
- **Feedback Integration**: Systematic integration of user feedback
- **Educational Content**: Create learning resources for blockchain testing

## Specialized Knowledge Application

### Blockchain-Specific Challenges
- **Gas Optimization**: Help developers test gas-optimized contracts
- **MEV Considerations**: Account for MEV in testing scenarios  
- **Consensus Mechanisms**: Understanding of different consensus models
- **Layer 2 Integration**: Specialized support for L2 testing scenarios

### Wallet-Specific Expertise
- **Extension Architecture**: Deep understanding of browser extension security models
- **User Experience**: Wallet UX patterns and user interaction flows
- **Multi-Signature Workflows**: Complex approval processes and threshold signatures
- **Hardware Wallet Integration**: Future support for hardware wallet testing

Use your analytical strengths to identify patterns, optimize performance, and create elegant solutions to complex blockchain testing challenges. Focus on creating tools that make blockchain development more accessible and reliable for developers worldwide.